!function(t){var e={};function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var a=wp.element.Fragment,s=wp.components.Spinner,i=function(t){return"loading"==t.status?[React.createElement(a,null,React.createElement("div",{className:"st-block-preview"},React.createElement("div",{className:"st-block-preview__content"},React.createElement("div",{className:"st-block-preview__logo"}," "),React.createElement(s,null))))]:null},o=function(t,e){return"strong-view strong-view-id-".concat(t," ").concat(e," wpmtst-").concat(e)},r=function(t,e){var n="strong-content strong-".concat(t," columns-").concat(e);return""==t?n="strong-content strong-normal columns-1":"masonry"==t&&(n+=" masonry"),n},l=function(t){return React.createElement("h3",{class:"wpmtst-testimonial-heading testimonial-heading"},React.createElement("a",{href:t.meta.meta.company_website[0],rel:"bookmark"},t.title.rendered))},c=function(t){switch(t){case"widget-thumbnail":return"75";case"thumbnail":return"150";case"medium":return"300";case"large":return"1024"}},u=wp.element,m=(u.Component,u.Fragment,u.useEffect),p=function(t){var e,n,a,s=t.testimonial,i=t.attributes,o=t.viewType,r=s.id;s.title,s.content,s.meta.meta;if("display"==o){var u=i.layout;i.columns;m((function(){var t;"masonry"==u&&((t=jQuery('.strong-view[data-state="idle"] .strong-masonry')).prepend('<div class="grid-sizer"></div><div class="gutter-sizer"></div>'),t.masonry({columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".wpmtst-testimonial",percentPosition:!0}),t.closest(".strong-view").attr("data-state","init"))}))}return[React.createElement("div",{className:"wpmtst-testimonial testimonial post-".concat(r," t-slide")},React.createElement("div",{className:"wpmtst-testimonial-inner testimonial-inner"},React.createElement("div",{className:"wpmtst-testimonial-content testimonial-content"},l(s),React.createElement("p",null,s.content.raw.replace(/(<([^>]+)>)/gi,""))),(e=s.meta.featured_image,n=st_views.gravatar,a=c("thumbnail"),0==e?React.createElement("div",{class:"wpmtst-testimonial-image testimonial-image"},React.createElement("img",{alt:"",src:n,srcset:n,class:"avatar avatar-".concat(a," photo"),height:a,width:a,loading:"lazy"})):React.createElement("div",{class:"wpmtst-testimonial-image testimonial-image"},React.createElement("img",{width:a,height:a,src:e,class:"attachment-thumbnail size-thumbnail wp-post-image",alt:"",srcset:e,sizes:"(max-width: ".concat(a,"px) 100vw, ").concat(a,"px")}))),React.createElement("div",{class:"clear"})))]};function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var g=wp.element,f=g.Fragment,y=g.useEffect,h=function(t){var e=t.attributes,n=t.initMasonry,a=t.setMasonryObj,s=e.id,i=e.template,l=e.layout,c=e.columns,u=e.testimonials;return y((function(){"masonry"==l&&n(s,a)})),[React.createElement("div",{className:o(s,i),"data-count":u.length,"data-state":"idle"},React.createElement("div",{className:r(l,c)},React.createElement(f,null,u.map((function(e,n){return[React.createElement(p,d({testimonial:e,index:n},t))]})))))]},v=wp.element.useEffect,b=function(t){var e=t.allTestimonialsCategories,n=t.selectedCategories,a=t.setAttributes,s=t.dispatch;return v((function(){var t=[];if(e.forEach((function(e){t.push({value:e.id,label:e.name,count:e.count,slug:e.slug})})),!jQuery(".st-testimonial-categories-input").hasClass("selectize-control"))jQuery(".st-testimonial-categories-input").selectize({valueField:"value",plugins:["remove_button"],labelField:"label",searchField:["label","value"],multiple:!0,create:!1,placeholder:"Search for category...",preload:!0,allowEmptyOptions:!0,closeAfterSelect:!0,options:n.concat(t),render:{option:function(t,e){return'<div class="st-categories"><p class="st-category-name">'+e(t.label)+'</p><p class="st-category-count">'+e(t.count)+"</p></div>"}},onChange:function(t){t=t.split(","),s({type:"SELECTEDCATEGORYCHANGE",payload:{value:t,setAttributes:a}})}})}),[]),React.createElement("input",{className:"st-testimonial-categories-input",value:0==n.length?"":n.join()})},w=wp.i18n.__,_=(wp.element.Fragment,wp.blockEditor.InspectorControls),E=wp.components,R=(E.Button,E.PanelBody),C=E.RangeControl,O=E.SelectControl,S=E.__experimentalNumberControl,j=function(t){var e=t.attributes,n=t.setAttributes,a=t.testimonialsFetch,s=t.dispatch,i=t.destroyMasonry,o=t.masonryObj,r=e.id,l=e.layout,c=e.columns,u=e.testimonialsToShow,m=e.maxTestimonialCount,p=e.allTestimonialsCategories,d=e.selectedCategories,g=e.orderBy;return React.createElement(React.Fragment,null,React.createElement(_,null,React.createElement(R,{title:w("Layout Settings","strong-testimonials"),initialOpen:!0},React.createElement(O,{label:w("Type","strong-testimonials"),value:l,options:[{label:w("List","strong-testimonials"),value:""},{label:w("Masonry","strong-testimonials"),value:"masonry"},{label:w("Columns","strong-testimonials"),value:"columns"},{label:w("Grid","strong-testimonials"),value:"grid"}],onChange:function(t){"masonry"!=t&&i(r,o),n({layout:t})}}),""!=l&&React.createElement(C,{label:w("Columns","strong-testimonials"),value:c,onChange:function(t){return n({columns:t})},min:2,max:4}),React.createElement(React.Fragment,null,React.createElement("label",null,"No. of testimonials"),React.createElement(S,{isShiftStepEnabled:!0,onChange:function(t){return n({testimonialsToShow:parseInt(t)})},shiftStep:10,value:u,min:-1,max:m}))),React.createElement(R,{title:w("Testimonial Category","strong-testimonials"),initialOpen:!0},null!=p&&React.createElement(React.Fragment,null,React.createElement(b,{setAttributes:n,allTestimonialsCategories:p,selectedCategories:d,testimonialsFetch:a,dispatch:s}))),React.createElement(R,{title:w("Order By","strong-testimonials"),initialOpen:!0},React.createElement(O,{value:g,options:[{label:w("Newest First","strong-testimonials"),value:"desc"},{label:w("Oldest First","strong-testimonials"),value:"asc"}],onChange:function(t){return s({type:"ORDERBYCHANGE",payload:{value:t,setAttributes:n}})}}))))},T=function(t,e,n){0==t.testimonials.length&&e({testimonials:n})};function k(){return(k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,s,i=[],o=!0,r=!1;try{for(n=n.call(t);!(o=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){r=!0,s=t}finally{try{o||null==n.return||n.return()}finally{if(r)throw s}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}wp.i18n.__;var N=wp.element,P=(N.Component,N.Fragment,N.useEffect),F=N.useReducer,B=N.useState,M=wp.data,z=M.withSelect,D=M.useSelect,Q=wp.components;Q.SelectControl,Q.Spinner,Q.Toolbar,Q.Button,wp.blockEditor.BlockControls,wp.compose.compose;function G(t,e){switch(e.type){case"ORDERBYCHANGE":return t.orderBy=e.payload.value,e.payload.setAttributes({orderBy:e.payload.value,testimonials:[]}),t;case"SELECTEDCATEGORYCHANGE":return e.payload.setAttributes({selectedCategories:e.payload.value,testimonials:[]}),t;default:return t}}z((function(t,e){return{testimonials:(0,t("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}})),wp.components.withFilters("wpst.StrongTestimonialViewEdit");var H=function(t){var e=t.setAttributes,n=t.attributes,a=n.status,s=n.testimonials,o=n.testimonialsToShow,r=n.selectedCategories,l=n.orderBy,c=(n.id,x(F(G,{orderBy:l,selectedCategories:r}),2)),u=(c[0],c[1]),m=D((function(t){var e=t("core").getEntityRecords,n={post_status:"publish",per_page:0==o?-1:o,order:"asc"==l?"asc":"desc"};return 0!=r.length&&""!=r.join()&&(n["wpm-testimonial-category"]=r),e("postType","wpm-testimonial",n)||[]})),p=x(B(!1),2),d=p[0],g=p[1],f=function(t,e){t.currentTarget.setMasonryObj(t.currentTarget)};return P((function(){0==n.id&&(!function(t){wp.apiFetch({path:"wp/v2/wpm-testimonial-category"}).then((function(e){t({allTestimonialsCategories:e})}))}(e),e({id:Math.floor(1e4*Math.random())+1,layout:"",template:"default",columns:2}))}),[]),P((function(){if(0!=s.length){if(0!=o&&o!==s.length){var t=s.length;t<o&&e({testimonials:m}),t>o&&e({testimonials:m})}}else 0==m.length?e({status:"loading"}):0!=m.length&&0==s.length&&e({status:"ready",testimonials:m,maxTestimonialCount:m.length})})),P((function(){T(n,e,m)}),[l,r]),"loading"===a?[React.createElement(i,{status:a})]:React.createElement(React.Fragment,null,React.createElement(j,k({},t,{testimonialsFetch:m,dispatch:u,getTestimonials:T,destroyMasonry:function(t,e){return 0!=e&&(jQuery(e).masonry("destroy"),!0)},masonryObj:d})),React.createElement(h,k({},t,{initMasonry:function(t,e){var n=jQuery(".strong-view-id-".concat(t," .strong-masonry"));0==jQuery(".grid-sizer").length&&n.prepend('<div class="grid-sizer"></div><div class="gutter-sizer"></div>');var a=n.masonry({columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".wpmtst-testimonial",percentPosition:!0});a[0].setMasonryObj=e,a.on("layoutComplete",f),n.closest(".strong-view-id-".concat(t)).attr("data-state","init")},setMasonryObj:g})))},L=function(t,e,n){var a="strong-view strong-view-id-".concat(t," ").concat(e," wpmtst-").concat(e," slider-container slider-mode-").concat(n.effect);return 1==n.adapt_height&&(a+=" slider-adaptive"),"none"!=n.controls_type&&("sides"==n.controls_type?a+=" controls-type-sides controls-style-".concat(n.controls_style):"simple"!=n.controls_type&&"full"!=n.controls_type||(a+=" nav-position-".concat(n.nav_position," controls-style-").concat(n.controls_style)),"full"==n.pager_type&&(a+=" pager-type-full pager-style-".concat(n.pager_style))),a},I=wp.element,Y=I.Fragment,q=I.useEffect,V=function(t){var e=t.attributes,n=e.id,a=e.template,s=e.testimonials,i=e.config,o=e.viewType;q((function(){!1!==i&&r(function(t,e){return{mode:t.effect,speed:t.speed,pause:t.pause,autoHover:t.auto_hover,autoStart:0,infiniteLoop:t.continuous_sliding,stopAutoOnClick:t.stop_auto_on_click,adaptiveHeight:t.adapt_height,adaptiveHeightSpeed:t.adapt_height_speed,controls:1,autoControls:1,pager:"full"==t.pager_type?1:0,slideCount:e.length,debug:!1,type:t.type,breakpoints:{single:{maxSlides:t.show_single.max_slides,moveSlides:t.show_single.move_slides,slideMargin:t.show_single.margin},multiple:t.breakpoints},startText:"text"==t.controls_style?"Start":"",stopText:"text"==t.controls_style?"Stop":"",prevText:"text"==t.controls_style?"Prev":"",nextText:"text"==t.controls_style?"Next":"",buildPager:"text"==t.pager_style?null:"icons",simpleSetPager:1}}(i,s))}));var r=function(t){console.log(t);var e=jQuery('.strong-view.slider-container[data-state="idle"]');e.length&&e.each((function(){var e=jQuery(this),n=e.data("count");void 0!==n&&1===n||e.strongSlider(t)}))};return React.createElement(Y,null,React.createElement("div",{className:L(n,a,i),"data-count":s.length,"data-slider-var":"strong_slider_id_".concat(n),"data-state":"idle"}," ",React.createElement("div",{class:"strong-content wpmslider-content"},s.length>0&&React.createElement(Y,null,s.map((function(t,e){return[React.createElement(p,{testimonial:t,index:e,viewType:o})]}))))))},W=wp.element,U=(W.Component,W.Fragment,W.useEffect),$=wp.data,J=$.withSelect,K=$.useSelect,X=wp.components,Z=(X.SelectControl,X.Spinner,X.Toolbar,X.Button,wp.blockEditor.BlockControls,wp.compose.compose,J((function(t,e){return{testimonials:(0,t("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}})),wp.components.withFilters("wpst.StrongTestimonialViewEdit"),function(t){var e=t.setAttributes,n=t.attributes,a=n.status,s=n.testimonials,o=n.id,r=n.template,l=n.config,c=K((function(t){return(0,t("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}));return U((function(){0!=s||(0==c.length?e({status:"loading"}):0!=c.length&&0==s.length&&e({status:"ready",testimonials:c}))})),U((function(){0==o&&""==r&&e({id:Math.floor(1e4*Math.random())+1,template:"default"}),0==l&&e({config:{type:"show_single",show_single:{max_slides:1,move_slides:1,margin:1},breakpoints:{desktop:{description:"Desktop",width:1200,max_slides:2,move_slides:1,margin:20},large:{description:"Large",width:1024,max_slides:2,move_slides:1,margin:20},medium:{description:"Medium",width:640,max_slides:1,move_slides:1,margin:10},small:{description:"Small",width:480,max_slides:1,move_slides:1,margin:1}},effect:"fade",speed:1,pause:8,auto_start:!0,continuous_sliding:!0,auto_hover:!0,adapt_height:!0,adapt_height_speed:.5,stretch:0,stop_auto_on_click:!0,controls_type:"simple",controls_style:"buttons",pager_type:"none",pager_style:"buttons",nav_position:"inside"}})})),"loading"===a?[React.createElement(i,{status:a})]:React.createElement(V,t)});function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function it(t,e,n){return e&&st(t.prototype,e),n&&st(t,n),t}var ot=wp.i18n.__,rt=wp.blocks.registerBlockType,lt=wp.blocks.createBlock,ct=function(){function t(){at(this,t),this.registerBlock()}return it(t,[{key:"registerBlock",value:function(){this.blockName="strongtestimonials/view",this.blockAttributes={id:{type:"number",default:0},viewType:{type:"string",default:"display"},status:{type:"string",default:"ready"},template:{type:"string",default:""},layout:{type:"string",default:""},columns:{type:"number",default:2},testimonialsToShow:{type:"number",default:0},maxTestimonialCount:{type:"number",default:-1},testimonials:{type:"array",default:[]},allTestimonialsCategories:{type:"array",default:[]},selectedCategories:{type:"array",default:[]},orderBy:{type:"string",default:"desc"}},rt(this.blockName,{title:"Display",description:ot("A beatiful display to show all your testimonials","strong-testimonials"),icon:"editor-quote",category:"strong-testimonials-view",supports:{customClassName:!1},attributes:this.blockAttributes,transforms:{to:[{attributes:et({},this.attributes),type:"block",priority:7,blocks:["strongtestimonials/slideshow"],transform:function(t){return lt("strongtestimonials/slideshow",{id:t.id,status:t.status,template:t.template,testimonials:t.testimonials})}}]},edit:H,save:function(){return null}})}}]),t}(),ut=function(){function t(){at(this,t),this.registerBlock()}return it(t,[{key:"registerBlock",value:function(){this.blockName="strongtestimonials/slideshow",this.blockAttributes={id:{type:"number",default:0},viewType:{type:"string",default:"slideshow"},status:{type:"string",default:"ready"},template:{type:"string",default:""},testimonials:{type:"array",default:[]},config:{type:"object",default:!1}},rt(this.blockName,{title:"Slideshow",description:ot("A beautiful slideshow to show all your testimonials","strong-testimonials"),icon:"editor-quote",category:"strong-testimonials-view",supports:{customClassName:!1},attributes:this.blockAttributes,transforms:{to:[{attributes:et({},this.attributes),type:"block",priority:7,blocks:["strongtestimonials/view"],transform:function(t){return lt("strongtestimonials/view",{id:t.id,status:t.status,template:t.template,testimonials:t.testimonials})}}]},edit:Z,save:function(){return null}})}}]),t}();new ct,new ut}]);