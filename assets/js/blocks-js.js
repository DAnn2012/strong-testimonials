!function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);var a=wp.element.Fragment,i=wp.components.Spinner,s=function(t){return"loading"==t.status?[React.createElement(a,null,React.createElement("div",{className:"st-block-preview"},React.createElement("div",{className:"st-block-preview__content"},React.createElement("div",{className:"st-block-preview__logo"}," "),React.createElement(i,null))))]:null},o=function(t,e){return"strong-view strong-view-id-".concat(t," ").concat(e," wpmtst-").concat(e)},r=function(t,e){var n="strong-content strong-".concat(t," columns-").concat(e);return""==t?n="strong-content strong-normal columns-1":"masonry"==t&&(n+=" masonry"),n},l=function(t){return React.createElement("h3",{class:"wpmtst-testimonial-heading testimonial-heading"},React.createElement("a",{href:t.meta.meta.company_website[0],rel:"bookmark"},t.title.rendered))},c=function(t){switch(t){case"widget-thumbnail":return"75";case"thumbnail":return"150";case"medium":return"300";case"large":return"1024"}},u=wp.element,m=(u.Component,u.Fragment,u.useEffect),p=function(t){var e,n,a,i=t.testimonial,s=t.attributes,o=t.viewType,r=i.id;i.title,i.content,i.meta.meta;if("display"==o){var u=s.layout;s.columns;m((function(){var t;"masonry"==u&&((t=jQuery('.strong-view[data-state="idle"] .strong-masonry')).prepend('<div class="grid-sizer"></div><div class="gutter-sizer"></div>'),t.masonry({columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".wpmtst-testimonial",percentPosition:!0}),t.closest(".strong-view").attr("data-state","init"))}))}return[React.createElement("div",{className:"wpmtst-testimonial testimonial post-".concat(r," t-slide")},React.createElement("div",{className:"wpmtst-testimonial-inner testimonial-inner"},React.createElement("div",{className:"wpmtst-testimonial-content testimonial-content"},l(i),React.createElement("p",null,i.content.raw.replace(/(<([^>]+)>)/gi,""))),(e=i.meta.featured_image,n=st_views.gravatar,a=c("thumbnail"),0==e?React.createElement("div",{class:"wpmtst-testimonial-image testimonial-image"},React.createElement("img",{alt:"",src:n,srcset:n,class:"avatar avatar-".concat(a," photo"),height:a,width:a,loading:"lazy"})):React.createElement("div",{class:"wpmtst-testimonial-image testimonial-image"},React.createElement("img",{width:a,height:a,src:e,class:"attachment-thumbnail size-thumbnail wp-post-image",alt:"",srcset:e,sizes:"(max-width: ".concat(a,"px) 100vw, ").concat(a,"px")}))),React.createElement("div",{class:"clear"})))]};function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var g=wp.element,f=g.Fragment,y=g.useEffect,v=function(t){var e=t.attributes,n=t.initMasonry,a=e.id,i=e.template,s=e.layout,l=e.columns,c=e.testimonials;return y((function(){"masonry"==s&&n()}),[l]),[React.createElement("div",{className:o(a,i),"data-count":c.length,"data-state":"idle"},React.createElement("div",{className:r(s,l)},React.createElement(f,null,c.map((function(e,n){return[React.createElement(p,d({testimonial:e,index:n},t))]})))))]},h=wp.element.useEffect,b=function(t){var e=t.allTestimonialsCategories,n=t.selectedCategories,a=t.setAttributes;return h((function(){var t=[];if(e.forEach((function(e){t.push({value:e.id,label:e.name,count:e.count,slug:e.slug})})),!jQuery(".st-testimonial-categories-input").hasClass("selectize-control"))jQuery(".st-testimonial-categories-input").selectize({valueField:"value",plugins:["remove_button"],labelField:"label",searchField:["label","value"],multiple:!0,create:!1,placeholder:"Search for category...",preload:!0,allowEmptyOptions:!0,closeAfterSelect:!0,options:n.concat(t),render:{option:function(t,e){return'<div class="st-categories"><p class="st-category-name">'+e(t.label)+'</p><p class="st-category-count">'+e(t.count)+"</p></div>"}},onChange:function(t){var e=t.split(",");a({selectedCategories:e})}})}),[]),React.createElement("input",{className:"st-testimonial-categories-input",value:0==n.length?"":n.join()})},w=wp.i18n.__,_=(wp.element.Fragment,wp.blockEditor.InspectorControls),E=wp.components,R=(E.Button,E.PanelBody),k=E.RangeControl,S=E.SelectControl,C=E.__experimentalNumberControl,O=function(t){var e=t.attributes,n=t.setAttributes,a=t.testimonialsFetch,i=e.layout,s=e.columns,o=e.testimonialsToShow,r=e.maxTestimonialCount,l=e.allTestimonialsCategories,c=e.selectedCategories,u=e.orderBy;return React.createElement(React.Fragment,null,React.createElement(_,null,React.createElement(R,{title:w("Layout Settings","strong-testimonials"),initialOpen:!0},React.createElement(S,{label:w("Type","strong-testimonials"),value:i,options:[{label:w("List","strong-testimonials"),value:""},{label:w("Masonry","strong-testimonials"),value:"masonry"},{label:w("Columns","strong-testimonials"),value:"columns"},{label:w("Grid","strong-testimonials"),value:"grid"}],onChange:function(t){return n({layout:t})}}),""!=i&&React.createElement(k,{label:w("Columns","strong-testimonials"),value:s,onChange:function(t){return n({columns:t})},min:2,max:4}),React.createElement(React.Fragment,null,React.createElement("label",null,"No. of testimonials"),React.createElement(C,{isShiftStepEnabled:!0,onChange:function(t){return n({testimonialsToShow:parseInt(t)})},shiftStep:10,value:o,min:-1,max:r}))),React.createElement(R,{title:w("Testimonial Category","strong-testimonials"),initialOpen:!0},null!=l&&React.createElement(React.Fragment,null,React.createElement(b,{setAttributes:n,allTestimonialsCategories:l,selectedCategories:c,testimonialsFetch:a}))),React.createElement(R,{title:w("Order By","strong-testimonials"),initialOpen:!0},React.createElement(S,{value:u,options:[{label:w("Newest First","strong-testimonials"),value:"desc"},{label:w("Oldest First","strong-testimonials"),value:"asc"}],onChange:function(t){return function(t){n({orderBy:t}),n({testimonials:a})}(t)}}))))};function T(){return(T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}wp.i18n.__;var j=wp.element,x=(j.Component,j.Fragment,j.useEffect),P=wp.data,F=P.withSelect,N=P.useSelect,B=wp.components,z=(B.SelectControl,B.Spinner,B.Toolbar,B.Button,wp.blockEditor.BlockControls,wp.compose.compose,F((function(t,e){return{testimonials:(0,t("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}})),wp.components.withFilters("wpst.StrongTestimonialViewEdit"),function(t){var e=t.setAttributes,n=t.attributes,a=n.status,i=n.testimonials,o=n.testimonialsToShow,r=n.selectedCategories,l=n.orderBy,c=N((function(t){var e=t("core").getEntityRecords,n={post_status:"publish",per_page:0==o?-1:o,order:"asc"==l?"asc":"desc"};return 0!=r.length&&""!=r.join()&&(n["wpm-testimonial-category"]=r),e("postType","wpm-testimonial",n)||[]}));return x((function(){0==n.id&&(!function(t){wp.apiFetch({path:"wp/v2/wpm-testimonial-category"}).then((function(e){t({allTestimonialsCategories:e})}))}(e),e({id:Math.floor(1e4*Math.random())+1,layout:"",template:"default",columns:2}))}),[]),x((function(){if(0!=i.length){if(0!=o&&o!==i.length){var t=i.length;t<o&&e({testimonials:c}),t>o&&e({testimonials:c})}}else 0==c.length?e({status:"loading"}):0!=c.length&&0==i.length&&e({status:"ready",testimonials:c,maxTestimonialCount:c.length})})),x((function(){}),[l]),x((function(){})),"loading"===a?[React.createElement(s,{status:a})]:React.createElement(React.Fragment,null,React.createElement(O,T({},t,{testimonialsFetch:c})),React.createElement(v,T({},t,{initMasonry:function(){var t=jQuery(".strong-view .strong-masonry");0==jQuery(".grid-sizer").length&&t.prepend('<div class="grid-sizer"></div><div class="gutter-sizer"></div>');t.masonry({columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".wpmtst-testimonial",percentPosition:!0});t.closest(".strong-view").attr("data-state","init")}})))}),A=function(t,e,n){var a="strong-view strong-view-id-".concat(t," ").concat(e," wpmtst-").concat(e," slider-container slider-mode-").concat(n.effect);return 1==n.adapt_height&&(a+=" slider-adaptive"),"none"!=n.controls_type&&("sides"==n.controls_type?a+=" controls-type-sides controls-style-".concat(n.controls_style):"simple"!=n.controls_type&&"full"!=n.controls_type||(a+=" nav-position-".concat(n.nav_position," controls-style-").concat(n.controls_style)),"full"==n.pager_type&&(a+=" pager-type-full pager-style-".concat(n.pager_style))),a},M=wp.element,Q=M.Fragment,D=M.useEffect,L=function(t){var e=t.attributes,n=e.id,a=e.template,i=e.testimonials,s=e.config,o=e.viewType;D((function(){!1!==s&&r(function(t,e){return{mode:t.effect,speed:t.speed,pause:t.pause,autoHover:t.auto_hover,autoStart:0,infiniteLoop:t.continuous_sliding,stopAutoOnClick:t.stop_auto_on_click,adaptiveHeight:t.adapt_height,adaptiveHeightSpeed:t.adapt_height_speed,controls:1,autoControls:1,pager:"full"==t.pager_type?1:0,slideCount:e.length,debug:!1,type:t.type,breakpoints:{single:{maxSlides:t.show_single.max_slides,moveSlides:t.show_single.move_slides,slideMargin:t.show_single.margin},multiple:t.breakpoints},startText:"text"==t.controls_style?"Start":"",stopText:"text"==t.controls_style?"Stop":"",prevText:"text"==t.controls_style?"Prev":"",nextText:"text"==t.controls_style?"Next":"",buildPager:"text"==t.pager_style?null:"icons",simpleSetPager:1}}(s,i))}));var r=function(t){console.log(t);var e=jQuery('.strong-view.slider-container[data-state="idle"]');e.length&&e.each((function(){var e=jQuery(this),n=e.data("count");void 0!==n&&1===n||e.strongSlider(t)}))};return React.createElement(Q,null,React.createElement("div",{className:A(n,a,s),"data-count":i.length,"data-slider-var":"strong_slider_id_".concat(n),"data-state":"idle"}," ",React.createElement("div",{class:"strong-content wpmslider-content"},i.length>0&&React.createElement(Q,null,i.map((function(t,e){return[React.createElement(p,{testimonial:t,index:e,viewType:o})]}))))))},H=wp.element,q=(H.Component,H.Fragment,H.useEffect),I=wp.data,V=I.withSelect,W=I.useSelect,G=wp.components,J=(G.SelectControl,G.Spinner,G.Toolbar,G.Button,wp.blockEditor.BlockControls,wp.compose.compose,V((function(t,e){return{testimonials:(0,t("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}})),wp.components.withFilters("wpst.StrongTestimonialViewEdit"),function(t){var e=t.setAttributes,n=t.attributes,a=n.status,i=n.testimonials,o=n.id,r=n.template,l=n.config,c=W((function(t){return(0,t("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}));return q((function(){0!=i||(0==c.length?e({status:"loading"}):0!=c.length&&0==i.length&&e({status:"ready",testimonials:c}))})),q((function(){0==o&&""==r&&e({id:Math.floor(1e4*Math.random())+1,template:"default"}),0==l&&e({config:{type:"show_single",show_single:{max_slides:1,move_slides:1,margin:1},breakpoints:{desktop:{description:"Desktop",width:1200,max_slides:2,move_slides:1,margin:20},large:{description:"Large",width:1024,max_slides:2,move_slides:1,margin:20},medium:{description:"Medium",width:640,max_slides:1,move_slides:1,margin:10},small:{description:"Small",width:480,max_slides:1,move_slides:1,margin:1}},effect:"fade",speed:1,pause:8,auto_start:!0,continuous_sliding:!0,auto_hover:!0,adapt_height:!0,adapt_height_speed:.5,stretch:0,stop_auto_on_click:!0,controls_type:"simple",controls_style:"buttons",pager_type:"none",pager_style:"buttons",nav_position:"inside"}})})),"loading"===a?[React.createElement(s,{status:a})]:React.createElement(L,t)});function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function $(t,e,n){return e&&Z(t.prototype,e),n&&Z(t,n),t}var tt=wp.i18n.__,et=wp.blocks.registerBlockType,nt=wp.blocks.createBlock,at=function(){function t(){Y(this,t),this.registerBlock()}return $(t,[{key:"registerBlock",value:function(){this.blockName="strongtestimonials/view",this.blockAttributes={id:{type:"number",default:0},viewType:{type:"string",default:"display"},status:{type:"string",default:"ready"},template:{type:"string",default:""},layout:{type:"string",default:""},columns:{type:"number",default:2},testimonialsToShow:{type:"number",default:0},maxTestimonialCount:{type:"number",default:-1},testimonials:{type:"array",default:[]},allTestimonialsCategories:{type:"array",default:[]},selectedCategories:{type:"array",default:[]},orderBy:{type:"string",default:"desc"}},et(this.blockName,{title:"Display",description:tt("A beatiful display to show all your testimonials","strong-testimonials"),icon:"editor-quote",category:"strong-testimonials-view",supports:{customClassName:!1},attributes:this.blockAttributes,transforms:{to:[{attributes:U({},this.attributes),type:"block",priority:7,blocks:["strongtestimonials/slideshow"],transform:function(t){return nt("strongtestimonials/slideshow",{id:t.id,status:t.status,template:t.template,testimonials:t.testimonials})}}]},edit:z,save:function(){return null}})}}]),t}(),it=function(){function t(){Y(this,t),this.registerBlock()}return $(t,[{key:"registerBlock",value:function(){this.blockName="strongtestimonials/slideshow",this.blockAttributes={id:{type:"number",default:0},viewType:{type:"string",default:"slideshow"},status:{type:"string",default:"ready"},template:{type:"string",default:""},testimonials:{type:"array",default:[]},config:{type:"object",default:!1}},et(this.blockName,{title:"Slideshow",description:tt("A beautiful slideshow to show all your testimonials","strong-testimonials"),icon:"editor-quote",category:"strong-testimonials-view",supports:{customClassName:!1},attributes:this.blockAttributes,transforms:{to:[{attributes:U({},this.attributes),type:"block",priority:7,blocks:["strongtestimonials/view"],transform:function(t){return nt("strongtestimonials/view",{id:t.id,status:t.status,template:t.template,testimonials:t.testimonials})}}]},edit:J,save:function(){return null}})}}]),t}();new at,new it}]);