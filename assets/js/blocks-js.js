!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=s(e);if(t){var r=s(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a.r(t);var m=wp.i18n.__,u=wp.element,d=u.Component,p=u.Fragment,f=wp.blockEditor.InspectorControls,g=wp.components,v=g.SelectControl,w=g.Button,_=g.PanelBody,h=(g.PanelRow,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,e);var t,a,n,c=l(s);function s(e){return r(this,s),c.apply(this,arguments)}return t=s,(a=[{key:"render",value:function(){var e=this.props,t=e.attributes,a=(e.setAttributes,e.onIdChange),n=e.selectOptions,r=t.id;return t.views,t.testimonials,React.createElement(p,null,React.createElement(f,null,React.createElement(_,{title:m("View Settings"),initialOpen:!0},0===st_views.views.length&&React.createElement(p,null,React.createElement("p",null,m("You don't seem to have any views.")),React.createElement(w,{href:st_views.adminURL+"edit.php?post_type=wpm-testimonial&page=testimonial-views&action=add",target:"_blank",isDefault:!0},m("Add New View"))),st_views.views.length>0&&React.createElement(p,null,React.createElement(v,{label:m("Select View"),key:r,value:r,options:n,onChange:function(e){return a(parseInt(e))}}),0!=r&&React.createElement(w,{target:"_blank",href:st_views.adminURL+"edit.php?post_type=wpm-testimonial&page=testimonial-views&action=edit&id="+r,isSecondary:!0},m("Edit View"))))))}}])&&i(t.prototype,a),n&&i(t,n),s}(d)),R=(wp.i18n.__,wp.element),E=(R.Component,R.Fragment),y=(R.useEffect,wp.data.withSelect,wp.components),b=(y.SelectControl,y.Spinner,y.Toolbar,y.Button,wp.blockEditor.BlockControls,wp.compose.compose,function(e){var t=e.view.data.template,a=(e.view.id.id,[{fieldName:"client_name",renderName:"Full Name",description:"What is your full name ?"},{fieldName:"email",renderName:"Email",description:"What is you email adress?"}]),n=[{fieldName:"company_name",renderName:"Company Name",description:"What is your company name ?"},{fieldName:"company_website",renderName:"Company Website",description:"Does your company have a website ? "},{fieldName:"post_title",renderName:"Heading",description:"A headline for your testimonial"}];return[React.createElement(E,null,React.createElement("div",{className:"strong-view strong-form strong-view-id-".concat(e.view.id," ").concat(t," wpmtst-").concat(t)},React.createElement("div",{id:"wpmtst-form"},React.createElement("div",{className:"strong-form-inner"},React.createElement("form",{id:"wpmtst-submission-form"},a.map((function(e,t){return[React.createElement("div",{className:"form-field field-".concat(e.fieldName)},React.createElement("label",{for:"wpmtst_".concat(e.fieldName),className:"field-".concat(e.fieldName)},e.renderName),React.createElement("span",{className:"required symbol"}),React.createElement("input",{id:"wpmtst_".concat(e.fieldName),type:"text",className:"text",name:e.fieldName,value:"",placeholder:"",required:"",tabindex:"0"}),React.createElement("span",{className:"after"},e.description))]})),n.map((function(e,t){return[React.createElement("div",{className:"form-field field-".concat(e.fieldName)},React.createElement("label",{for:"wpmtst_".concat(e.fieldName),className:"field-".concat(e.fieldName)},e.renderName),React.createElement("input",{id:"wpmtst_".concat(e.fieldName),type:"text",className:"text",name:e.fieldName,value:"",placeholder:"",required:"",tabindex:"0"}),React.createElement("span",{className:"after"},e.description))]})),React.createElement("div",{className:"form-field field-post_content"},React.createElement("label",{for:"wpmtst_post_content",className:"field-post_content"},"Testimonial"),React.createElement("span",{className:"required symbol"}),React.createElement("textarea",{id:"wpmtst_post_content",name:"post_content",className:"textarea",required:"",placeholder:"",tabindex:"0"}),React.createElement("span",{className:"after"},"What do you think about us?")),React.createElement("div",{className:"form-field field-featured_image"},React.createElement("label",{for:"wpmtst_featured_image",className:"field-featured_image"},"Photo"),React.createElement("div",{className:"field-wrap"},React.createElement("input",{id:"wpmtst_featured_image",type:"file",name:"featured_image",tabindex:"0"})),React.createElement("span",{className:"after"},"Would you like to include a photo?")),React.createElement("div",{className:"form-field field-star_rating"},React.createElement("label",{for:"wpmtst_star_rating",className:"field-star_rating"},"Star rating"),React.createElement("div",{className:"strong-rating-wrapper field-wrap in-form"},React.createElement("fieldset",{contenteditable:"false",id:"wpmtst_star_rating",name:"star_rating",className:"strong-rating","data-field-type":"rating",tabindex:"0"},React.createElement("legend",null,"rating fields"),React.createElement("input",{type:"radio",id:"star_rating-star0",name:"star_rating",value:"0",checked:"checked"}),React.createElement("label",{for:"star_rating-star0",title:"No stars"}),React.createElement("input",{type:"radio",id:"star_rating-star1",name:"star_rating",value:"1"}),React.createElement("label",{for:"star_rating-star1",title:"1 star"}),React.createElement("input",{type:"radio",id:"star_rating-star2",name:"star_rating",value:"2"}),React.createElement("label",{for:"star_rating-star2",title:"2 stars"}),React.createElement("input",{type:"radio",id:"star_rating-star3",name:"star_rating",value:"3"}),React.createElement("label",{for:"star_rating-star3",title:"3 stars"}),React.createElement("input",{type:"radio",id:"star_rating-star4",name:"star_rating",value:"4"}),React.createElement("label",{for:"star_rating-star4",title:"4 stars"}),React.createElement("input",{type:"radio",id:"star_rating-star5",name:"star_rating",value:"5"}),React.createElement("label",{for:"star_rating-star5",title:"5 stars"}))),React.createElement("span",{className:"after"},"Would you like to include star rating?")),React.createElement("div",{className:"form-field wpmtst-submit"},React.createElement("label",null,React.createElement("input",{type:"submit",id:"wpmtst_submit_testimonial",name:"wpmtst_submit_testimonial",value:"Add Testimonial",className:"button",tabindex:"0"}))))))))]}),N=wp.element,k=(N.Component,N.Fragment),x=N.useEffect,S=function(e){var t=e.testimonial,a=(e.index,e.data),n=e.generateReadMoreButton,r=t.id,i=t.title,o=(t.content,t.meta.meta),l=a.client_section,c=[1,2,3,4,5];x((function(){var e;1==a.pagination&&function(e){var t=jQuery('.strong-pager[data-state="idle"]');t.length&&t.each((function(){jQuery(this).strongPager(e)}))}({pageSize:a.pagination_settings.per_page,pagerLocation:a.pagination_settings.nav,div:".strong-content"});"masonry"==a.layout&&((e=jQuery('.strong-view[data-state="idle"] .strong-masonry')).prepend('<div class="grid-sizer"></div><div class="gutter-sizer"></div>'),e.masonry({columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".wpmtst-testimonial",percentPosition:!0}),e.closest(".strong-view").attr("data-state","init"))}));var s=function(e){switch(e){case"widget-thumbnail":return"75";case"thumbnail":return"150";case"medium":return"300";case"large":return"1024"}};return[React.createElement("div",{className:"wpmtst-testimonial testimonial post-".concat(r," t-slide")},React.createElement("div",{className:"wpmtst-testimonial-inner testimonial-inner"},React.createElement("div",{className:"wpmtst-testimonial-content testimonial-content"},1==a.title&&function(e,t){return"none"==t?React.createElement("h3",{class:"wpmtst-testimonial-heading testimonial-heading"},i.rendered):"wpmtst_testimonial"==t?React.createElement("h3",{class:"wpmtst-testimonial-heading testimonial-heading"},React.createElement("a",{href:e.link,rel:"bookmark"},i.rendered)):React.createElement("h3",{class:"wpmtst-testimonial-heading testimonial-heading"},React.createElement("a",{href:e.meta.company_website[0],rel:"bookmark"},i.rendered))}(t,a.title_link),"excerpt"==a.content?function(e,t){var a=e.content,n=(e.less_post_text,e.more_post_text,e.more_post,e.more_post_ellipsis,e.more_post_in_place),r=e.excerpt_length,i=t.content.raw.replace(/(<([^>]+)>)/gi,""),o={};switch(a){case"excerpt":if(o=function(e,t,a){var n="",r="";if(null!=t){try{if(e>(t=t.split(" ")).length)return;for(var i=0;i<e;i++)n+="".concat(t[i]," ");if(1==a)for(var o=e;o<t.length;o++)null!=t[o]&&(r+="".concat(t[o]," "))}catch(e){console.log(e)}return{excerpt:n,remaining:r}}}(r,i,n),0==n)return React.createElement("p",null,o.excerpt,React.createElement(k,null,i.trim().length!=o.excerpt.trim().length&&React.createElement("a",{href:t.link,className:"readmore"},e.more_post_text)))}}(a,t):React.createElement("p",null,t.content.raw.replace(/(<([^>]+)>)/gi,""))),1==a.thumbnail&&function(e,t,a){var n=s(a.thumbnail_size);return 0==e?React.createElement("div",{class:"wpmtst-testimonial-image testimonial-image"},React.createElement("img",{alt:"",src:t,srcset:t,class:"avatar avatar-".concat(n," photo"),height:n,width:n,loading:"lazy"})):React.createElement("div",{class:"wpmtst-testimonial-image testimonial-image"},React.createElement("img",{width:n,height:n,src:e,class:"attachment-".concat(a.thumbnail_size," size-").concat(a.thumbnail_size," wp-post-image"),alt:"",srcset:e,sizes:"(max-width: ".concat(n,"px) 100vw, ").concat(n,"px")}))}(t.meta.featured_image,st_views.gravatar,a),l.length>0&&React.createElement(k,null,l.map((function(e,a){switch(e.type){case"text":return React.createElement("div",{class:"wpmtst-testimonial-field testimonial-field ".concat(e.class)},o[e.field]);case"link":return React.createElement("div",{class:"wpmtst-testimonial-field testimonial-field ".concat(e.class)},React.createElement("a",{href:"".concat(o[e.url]),target:"_blank",rel:"nofollow  "},o[e.field]));case"rating":return React.createElement(k,null,null!=o.star_rating&&React.createElement("div",{className:"wpmtst-testimonial-field testimonial-field "},React.createElement("span",{className:"strong-rating-wrapper in-view"},React.createElement("span",{className:"strong-rating"},React.createElement("span",{className:"star",style:{display:"none"}}),c.map((function(e,t){return e==o.star_rating?React.createElement("span",{className:"star current"}):React.createElement("span",{className:"star"})}))))));case"date":return React.createElement("div",{class:"wpmtst-testimonial-field testimonial-field "},function(e){e=new Date(e);var t="".concat(e.toLocaleString("en-US",{month:"long"})," ");return t+="".concat(e.toLocaleString("en-US",{day:"numeric"})," "),t+="".concat(e.toLocaleString("en-US",{year:"numeric"})," ")}(t.date.split("T")[0]))}}))),1==a.more_page&&"wpmtst_after_testimonial"==a.more_page_hook&&React.createElement(k,null,n(a))))]},O=wp.element,T=(O.Component,O.Fragment),C=(O.useEffect,function(e){var t=e.testimonials,a=e.view,n=e.convertDateToUnix,r=e.sortTestimonialsByDate,i=e.generateReadMoreButton,o=a.data,l=a.id;return[React.createElement("div",{className:function(e){var t="strong-view strong-view-id-".concat(l," ").concat(e.template," wpmtst-").concat(e.template);return 1==e.pagination&&"simple"==e.pagination_settings.type&&(t+=" strong-pager"),t}(o),"data-count":t.length,"data-state":"idle"},React.createElement("div",{className:function(e,t){var a="strong-content strong-".concat(e.layout," columns-").concat(t);return""==e.layout?a="strong-content strong-normal columns-1":"masonry"==e.layout&&(a+=" masonry"),1==e.pagination&&"simple"==e.pagination_settings.type&&(a+=" strong-paginated"),a}(o,o.column_count)},t.length>0&&React.createElement(T,null,t.map((function(e,t){return-1==o.count||t<o.count?[React.createElement(S,{testimonial:e,index:t,data:o,convertDateToUnix:n,sortTestimonialsByDate:r,generateReadMoreButton:i})]:void 0})))),1==o.more_page&&React.createElement(T,null,i(o)))]}),B=wp.element,j=(B.Component,B.Fragment),D=B.useEffect,P=function(e){var t=e.testimonials,a=e.view,n=e.convertDateToUnix,r=e.sortTestimonialsByDate,i=e.generateReadMoreButton;console.log(e);var o=a.data,l=a.id,c=o.slideshow_settings;D((function(){var e={single:{maxSlides:c.show_single.max_slides,moveSlides:c.show_single.move_slides,slideMargin:c.show_single.margin},multiple:c.breakpoints},t={mode:c.effect,speed:c.speed,pause:c.pause,autoHover:c.auto_hover,autoStart:c.auto_start,infiniteLoop:c.continuous_sliding,stopAutoOnClick:c.stop_auto_on_click,adaptiveHeight:c.adapt_height,adaptiveHeightSpeed:c.adapt_height_speed,controls:0,autoControls:0,pager:0,type:c.type,breakpoints:e};s(t)}));var s=function(e){var t=jQuery('.strong-view.slider-container[data-state="idle"]');t.length&&t.each((function(){var t=jQuery(this),a=t.data("count");void 0!==a&&1===a||t.strongSlider(e)}))};return React.createElement(j,null,React.createElement("div",{className:function(e){var t="strong-view strong-view-id-".concat(l," ").concat(e.template," wpmtst-").concat(e.template," slider-container slider-mode-").concat(c.effect);return 1==c.adapt_height&&(t+=" slider-adaptive"),t}(o),"data-count":t.length,"data-slider-var":"strong_slider_id_".concat(l),"data-state":"idle"}," ",React.createElement("div",{class:"strong-content wpmslider-content"},t.length>0&&React.createElement(j,null,t.map((function(e,t){return-1==o.count||t<o.count?[React.createElement(S,{testimonial:e,index:t,data:o,convertDateToUnix:n,sortTestimonialsByDate:r,generateReadMoreButton:i})]:void 0}))))))};function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var U=wp.i18n.__,z=wp.element,A=(z.Component,z.Fragment),L=z.useEffect,V=wp.data.withSelect,F=wp.components,I=F.SelectControl,W=F.Spinner,q=(F.Toolbar,F.Button),Q=(wp.blockEditor.BlockControls,(0,wp.compose.compose)(V((function(e,t){return{testimonials:(0,e("core").getEntityRecords)("postType","wpm-testimonial",{post_status:"publish",per_page:-1})||[]}})),wp.components.withFilters("wpst.StrongTestimonialViewEdit"))((function(e){var t=e.attributes,a=e.setAttributes,n=e.testimonials,r=t.id,i=(t.views,t.status),o=(t.mode,t.view);L((function(){a({status:"ready",views:st_views.views}),0!=r&&l(r),null!=n&&n.length>1&&1!=e.attributes.sorted&&(n.map((function(e,t){e.unixDate=m(e.date)})),null!=o&&u(n,o.data.order))}));var l=function(t){e.setAttributes({status:"ready",id:t}),c(t)},c=function(e){var t=st_views.views.filter((function(t){return t.id==e}));return a({view:t[0]}),t[0]},s=function(){var e=[{value:0,label:U("None")}];return st_views.views.forEach((function(t){e.push({value:t.id,label:t.name})})),e},m=function(e){return new Date(e).getTime()},u=function(e,t){"oldest"==t?e.sort((function(e,t){return e.unixDate-t.unixDate})):"menu_order"==t?e.sort((function(e,t){return e.menu_order-t.menu_order})):"random"==t&&d(e),a({sorted:!0,testimonials:e})},d=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e};st_views.views.length>0&&U("Edit View");if("loading"===i)return[React.createElement(A,null,React.createElement("div",{className:"st-block-preview"},React.createElement("div",{className:"st-block-preview__content"},React.createElement("div",{className:"st-block-preview__logo"}," "),React.createElement(W,null))))];if(0==r)return[React.createElement(A,null,React.createElement(h,M({onIdChange:function(e){return l(e)},selectOptions:s()},e)),React.createElement("div",{className:"st-block-preview"},React.createElement("div",{class:"st-block-preview__content"},React.createElement("div",{className:"st-block-preview__logo"}),0===st_views.views.length&&React.createElement(A,null,React.createElement("h6",null,U("You don't seem to have any views.")),React.createElement(q,{href:st_views.adminURL+"edit.php?post_type=wpm-testimonial&page=testimonial-views&action=add",target:"_blank",isDefault:!0},U("Add New View"))),st_views.views.length>0&&React.createElement(A,null,React.createElement(I,{label:"Select a view:",className:"st-view-select",key:r,value:r,options:s(),onChange:function(e){return l(parseInt(e))}}),0!=r&&React.createElement(q,{target:"_blank",href:st_views.adminURL+"edit.php?post_type=wpm-testimonial&page=testimonial-views&action=edit&id="+r,isSecondary:!0},U("Edit Settings"))))))];if(0!=r&&n.length>0){if(null!=o){if("form"==o.data.mode)return[React.createElement(A,null,React.createElement(h,M({onIdChange:function(e){return l(e)},selectOptions:s()},e)),React.createElement(b,{view:o}),React.createElement(b,{view:o}))];if("display"==o.data.mode)return[React.createElement(A,null,React.createElement(h,M({onIdChange:function(e){return l(e)},selectOptions:s()},e)),React.createElement(C,{view:o,testimonials:n,convertDateToUnix:m,sortTestimonialsByDate:u,generateReadMoreButton:function(e){var t=st_views.adminURL.split("/");return t="".concat(t[0]).concat(t[2],"/?p=").concat(e.more_page_id),"wpmtst_view_footer"==e.more_page_hook?React.createElement("div",{className:"readmore-page"},React.createElement("a",{href:t},e.more_page_text)):"wpmtst_after_testimonial"==e.more_page_hook?React.createElement("div",{className:"readmore"},React.createElement("a",{href:t},e.more_page_text)):void 0}}))];if("slideshow"==o.data.mode)return[React.createElement(A,null,React.createElement(h,M({onIdChange:function(e){return l(e)},selectOptions:s()},e)),React.createElement(P,{view:o,testimonials:n,convertDateToUnix:m,sortTestimonialsByDate:u,generateReadMoreButton:!0}))]}return null}return null})));function H(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Y=wp.i18n.__,G=wp.blocks.registerBlockType;new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registerBlock()}var t,a,n;return t=e,(a=[{key:"registerBlock",value:function(){this.blockName="strongtestimonials/view",this.blockAttributes={id:{type:"number",default:0},mode:{type:"string",default:"display"}},G(this.blockName,{title:"Strong Testimonial View",description:Y("Render ST View","strong-testimonials"),icon:"editor-quote",category:"common",supports:{customClassName:!1},attributes:this.blockAttributes,edit:Q,save:function(){return null}})}}])&&H(t.prototype,a),n&&H(t,n),e}())}]);